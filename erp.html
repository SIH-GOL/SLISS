<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SLISS - Welcome</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --nav-h:56px;
      --accent1: #6378ff;
      --accent2: #7b5cff;
      --grad1: #4c1d95;
      --grad2: #7e22ce;
      --grad3: #a855f7;
    }

    *{box-sizing:border-box;margin:0;padding:0;font-family:"Poppins",sans-serif}

    body{
      background: linear-gradient(180deg,#0f172a 0%, #2a0b3d 45%, #7b2bb8 100%);
      color:#fff;
      min-height:100vh;
      overflow-x:hidden;
    }

    /* Navbar */
    .navbar{
      height:var(--nav-h);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 40px;
      background: rgba(3,8,23,0.6);
      backdrop-filter: blur(6px);
      border-bottom: 1px solid rgba(255,255,255,0.03);
      position:sticky;
      top:0;
      z-index:50;
    }
    .nav-left{display:flex;align-items:center;gap:12px}
    .navbar .logo{width:56px;height:auto;display:block}
    .brand-text{
      font-weight:600;
      color:#fff;
      margin-left:6px;
      letter-spacing:1px;
      font-size:20px;
      opacity:0.95;
    }

    .nav-links{display:flex;align-items:center;gap:12px}
    .nav-links a{
      display:inline-block;
      padding:8px 28px;
      border-radius:30px;
      text-decoration:none;
      color:#fff;
      font-weight:600;
      font-size:15px;
      background: linear-gradient(90deg,var(--accent1),var(--accent2));
      box-shadow: 0 6px 18px rgba(99,102,241,0.15);
      transition: transform .28s ease, box-shadow .28s ease, filter .28s;
      letter-spacing:1px;
    }
    .nav-links a:hover{
      transform: translateY(-3px) scale(1.03);
      box-shadow: 0 10px 30px rgba(99,102,241,0.28);
      filter:brightness(1.05);
    }

    /* Hero */
    .hero{
      display:flex;
      gap:24px;
      align-items:stretch;
      min-height: calc(100vh - var(--nav-h) - 6px);
      padding: 28px 36px;
    }
    .hero-left{
      flex:0 0 58%;
      display:flex;
      flex-direction:column;
      justify-content:center;
      padding: 40px 48px;
      align-items:center;
      text-align:center;
    }
    .hero-left .hero-logo{
      width:220px;
      max-width:60%;
      margin-bottom:18px;
      transition: transform .6s ease;
      filter: drop-shadow(0 10px 30px rgba(0,0,0,0.45));
      animation: bounce 3s infinite ease-in-out;
    }
    .hero-left .hero-logo:hover{ transform: translateY(-6px); }
    h1.big-title{
      font-size:50px;
      line-height:0.95;
      margin-bottom:18px;
      font-weight:700;
      letter-spacing:3px;
      text-transform:uppercase;
      text-shadow: 0 12px 30px rgba(0,0,0,0.45);
    }
    .hero-left .lead-quote{
      color: rgba(255,255,255,0.92);
      max-width:760px;
      margin-bottom:36px;
      font-size:18px;
      opacity:0.95;
    }
    .cta-row{ display:flex; width:100%; justify-content:center; }
    .btn-primary{
      display:inline-block;
      padding:18px 56px;
      border-radius:999px;
      background: linear-gradient(90deg,#9fc4ff66, #d7b3ff66);
      border: 1px solid rgba(255,255,255,0.06);
      color: #fff;
      font-weight:600;
      font-size:22px;
      letter-spacing:2px;
      cursor:pointer;
      box-shadow: 0 18px 40px rgba(139,92,246,0.16), inset 0 -6px 18px rgba(255,255,255,0.02);
      transition: transform .22s ease, box-shadow .22s ease, opacity .22s;
    }
    .btn-primary:hover{
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 26px 60px rgba(139,92,246,0.22);
      opacity:0.98;
    }
    .hero-right{
      flex:0 0 42%;
      display:flex;
      align-items:flex-end;
      justify-content:flex-end;
      padding-bottom:20px;
    }
    .hero-right img{
      height: calc(100vh - var(--nav-h) - 60px);
      min-height: 520px;
      width:auto;
      object-fit:cover;
      object-position: right bottom;
      transform: translateX(40px);
      filter: drop-shadow(0 40px 80px rgba(0,0,0,0.55));
      transition: transform .6s ease;
      max-width: none;
    }
    .hero-right img:hover{ transform: translateX(24px) scale(1.01); }

    /* About Section */
    .about { padding: 60px 20px; background: #0e0e1a; display: flex; flex-direction: column; align-items: center; gap: 40px; }
    .content-section { background: #1e1e2e; padding: 40px 50px; border-radius: 12px; max-width: 900px; width: 100%; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4); text-align: center; }
    .content-section h2 { color: #c084fc; margin-bottom: 20px; font-size: 26px; font-weight: 700; }
    .content-section p { color: #ddd; font-size: 16px; line-height: 1.7; }

    footer{ padding:26px; text-align:center; color:#cfcfcf; font-size:14px; }

    /* Responsive */
    @media (max-width:1100px){
      .hero{ padding:22px 20px; gap:12px; }
      .hero-left{ flex: 1 1 55%; padding:28px 20px; }
      .hero-right{ flex: 1 1 45%; }
      .hero-left .hero-logo{ width:170px }
      h1.big-title{ font-size:56px }
      .hero-right img{ height: calc(80vh - var(--nav-h)); min-height:420px; transform: translateX(12px); }
    }
    @media (max-width:820px){
      .hero{ flex-direction:column; min-height: auto; padding:18px 18px 60px; }
      .hero-left{ order:1; align-items:center; text-align:center; padding:22px 12px; }
      .hero-right{ order:2; width:100%; padding:10px; align-items:center; justify-content:center; }
      .hero-right img{ height:380px; width:88%; transform:none; object-position:center; }
      h1.big-title{ font-size:34px; }
      .hero-left .hero-logo{ width:140px; margin-bottom:12px; }
      .btn-primary{ padding:14px 40px; font-size:18px }
    }
  </style>
</head>
<body>
  <div class="top-strip"></div>

  <header class="navbar">
    <div class="nav-left">
      <img src="logo.png" alt="SLISS logo" class="logo">
      <div class="brand-text">SLISS</div>
    </div>

    <nav class="nav-links" aria-label="Main">
      <a href="index.html">HOME</a>
      <a href="about.html">ABOUT</a>
    </nav>
  </header>

  <main>
    <section class="hero" role="banner">
      <div class="hero-left" aria-hidden="false">
        <img src="pogo.png" alt="SLISS symbol" class="hero-logo">
        <h1 class="big-title">WELCOME TO SLISS</h1>
        <p class="lead-quote">
          <em>"Education is the passport to the future, for tomorrow belongs to those who prepare for it today."</em>
        </p>

        <div class="cta-row">
          <button class="btn-primary" onclick="openModal()">LOGIN</button>
        </div>
      </div>

      <div class="hero-right" aria-hidden="true">
        <img src="homepagepicimp.png" alt="illustration">
      </div>
    </section>

    <section class="about">
      <div class="content-section">
        <h2>Introduction</h2>
        <p>
          SLISS (Student Link of Integrated Smart System) is a powerful yet
          affordable digital platform designed to simplify academic and
          administrative processes for schools and colleges. It replaces outdated
          manual workflows—like maintaining separate ledgers for admissions, fees,
          hostel allocation, and examination records—with a centralized,
          cloud-based system that makes data accessible, accurate, and easy to
          manage. SLISS provides a seamless experience for students, staff, and
          administrators, creating a single source of truth for institutional
          data.
        </p>
      </div>

      <div class="content-section">
        <h2>Why SLISS</h2>
        <p>
          Low-Cost & Scalable: Built with cloud services most institutions already
          use—no heavy infrastructure or licensing fees. <br>
          Time-Saving: Eliminates repetitive data entry and manual processes. <br>
          User-Friendly: Easy for staff to adopt because it uses familiar
          spreadsheet and form tools. <br>
          Real-Time Insights: Administrators get a clear, instant view of
          institutional operations. <br>
          Efficient & Reliable: Automates key workflows, reduces errors, and
          ensures smooth communication.
        </p>
      </div>

      <div class="content-section">
        <h2>How It Works</h2>
        <p>
          SLISS connects widely used cloud tools, lightweight scripts, and simple
          automation to create a low-cost ERP solution: <br>
          <b>Admission Management:</b> Students apply online through customizable
          forms, and their data automatically flows into the central database. <br>
          <b>Fee Collection:</b> Digital payments generate instant, automated
          receipts, reducing paperwork and queues. <br>
          <b>Hostel & Library Tracking:</b> Real-time updates keep records accurate
          and accessible to administrators. <br>
          <b>Dashboards:</b> Key metrics like admissions, occupancy, and finances
          are displayed live for decision-making. <br>
          <b>Secure Access:</b> Role-based logins ensure data security, while
          regular backups protect sensitive information.
        </p>
      </div>
    </section>
  </main>

  <!-- Login Modal -->
  <div id="loginModal" style="display:none; position:fixed; inset:0; z-index:200; align-items:center; justify-content:center; background:rgba(0,0,0,0.6);">
    <div style="width:360px; background:#0f1320; border-radius:16px; padding:22px; box-shadow:0 20px 60px rgba(0,0,0,0.7);">
      <button id="closeBtn" style="float:right; background:transparent; border:none; color:#fff; font-size:20px; cursor:pointer;">✕</button>
      <h3 style="color:#fff; margin-top:6px; margin-bottom:12px;">Login to SLISS</h3>

      <!-- Using a form so Enter works -->
      <form id="loginForm" style="display:block;">
        <input id="userid" name="userid" placeholder="UserID" style="width:100%;padding:10px;border-radius:8px;border:0;background:#111226;color:#fff;margin-bottom:10px;">
        <input id="pass" name="password" placeholder="Password" type="password" style="width:100%;padding:10px;border-radius:8px;border:0;background:#111226;color:#fff;margin-bottom:12px;">
        <button type="submit" id="loginBtn" style="width:100%; padding:12px;border-radius:10px;border:0;background:linear-gradient(90deg,#7b61ff,#f097ff);color:#fff;font-weight:600;cursor:pointer;">Login</button>
      </form>
    </div>
  </div>

  <footer>
    &copy; 2025 SLISS — All rights reserved
  </footer>

  <script>
    // If a secret already exists on page load, redirect immediately to submit.html
    (function checkExistingSecretOnLoad(){
      try {
        const existing = localStorage.getItem('secret_key');
        if (existing) {
          // user already has a secret stored — go to submit page
          window.location.href = 'submit.html';
        }
      } catch (e) {
        console.warn('localStorage not accessible', e);
      }
    })();

    function openModal(){
      document.getElementById('loginModal').style.display = 'flex';
      // focus first input for quick typing
      setTimeout(()=> document.getElementById('userid').focus(), 60);
    }
    function closeModal(){
      document.getElementById('loginModal').style.display = 'none';
    }

    document.getElementById('closeBtn').addEventListener('click', closeModal);
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });

    // handle login via form submit
    document.getElementById('loginForm').addEventListener('submit', async function(event){
      event.preventDefault();
      await login();
    });

    async function login(){
      const useridEl = document.getElementById('userid');
      const passEl = document.getElementById('pass');
      const loginBtn = document.getElementById('loginBtn');

      const userid = (useridEl.value || '').trim();
      const password = (passEl.value || '').trim();

      if (!userid || !password) {
        alert("Please enter UserID and Password");
        return;
      }

      // disable button to prevent double submit
      loginBtn.disabled = true;
      loginBtn.style.opacity = '0.7';

      try {
        const res = await fetch("http://localhost:5000/api/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ userid, password })
        });

        const data = await res.json().catch(()=>({ message: 'Invalid response from server' }));

        if (res.ok) {
          // if a secret already exists locally, go to submit.html instead of erp.html
          const existingSecret = localStorage.getItem('secret_key');
          if (existingSecret) {
            // don't overwrite; just go to submit page
            window.location.href = 'submit.html';
            return;
          }

          // otherwise store returned secret and userid and go to erp.html
          localStorage.setItem('secret_key', data.secret_key);
          localStorage.setItem('userid', data.userid);
          window.location.href = 'erp.html';
        } else {
          alert(data.message || 'Login failed');
        }
      } catch (err) {
        console.error('Login error:', err);
        alert('Server error. Please try again.');
      } finally {
        loginBtn.disabled = false;
        loginBtn.style.opacity = '1';
      }
    }
  </script>
</body>
</html>
